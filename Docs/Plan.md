#ТЕСТ ПЛАН

### Подготовка окружения:

1. Устанавливаем необходимое ПО:
- IntelliJ IDEA
- Docker Desktop
2. Запускаем Docker Desktop
3. Запускаем IntelliJ IDEA
4. Открываем данный репозиторий
5. В IntelliJ IDEA открываем терминал и запускаем команду `docker-compose up`. Ожидаем сборки контейнера.
6. В IntelliJ IDEA открываем второй терминал и запускаем SUT командой `java "-Dspring.datasource.url=jdbc:mysql://localhost:3306/app" -jar artifacts/aqa-shop.jar` для mysql или командой `java "-Dspring.datasource.url=jdbc:postgresql://localhost:5432/app" -jar artifacts/aqa-shop.jar` для postgresql.
7. Запуск тестов производится с параметрами, указавая путь к базе данных в командной строке в терминале:
   для mysql `./gradlew clean test "-Ddb.url=jdbc:mysql://localhost:3306/app"` 
   для postgresql `./gradlew clean test "-Ddb.url=jdbc:postgresql://localhost:5432/app"`

### Входные данные:

Валидные карты для тестирования:

- 4444 4444 4444 4441, status APPROVED
- 4444 4444 4444 4442, status DECLINED

Валидные данные для карт:
- Номер карты состоит из 16 цифр.
- Месяц  от 01 до 12.
- Год в формате двух последних цифр полного номера года. (например, 22,23,24 и тд)
- Владелец (Имя фамилия) буквами  на латинице
- CVC в формате 3х цифр.

Валидные данные срока действия карты устанавливаются не ранее текущей даты и не старше 5 лет от текущей даты.


## Перечень автоматизируемых сценариев:

### - Позитивные сценарии:
1. Нажимаем кнопку "Купить" и вводим валидные данные карты 4444 4444 4444 4441. Нажимаем кнопку "Продолжить". Ожидаемый результат "Успешно". В БД в payment_entity появилась запись со статусом APPROVED.
2. Нажимаем кнопку "Купить" и вводим валидные данные карты 4444 4444 4444 4442. Нажимаем кнопку "Продолжить". Ожидаемый результат "Ошибка". В БД в payment_entity появилась запись со статусом DECLINED.
3. Нажимаем кнопку "Купить в кредит" и вводим валидные данные карты 4444 4444 4444 4441. Нажимаем кнопку "Продолжить". Ожидаемый результат "Успешно". В БД в credit_request_entity появилась запись со статусом APPROVED.
4. Нажимаем кнопку "Купить в кредит" и вводим валидные данные карты 4444 4444 4444 4442. Нажимаем кнопку "Продолжить". Ожидаемый результат "Ошибка". В БД в credit_request_entity появилась запись со статусом DECLINED.

### - Негативные сценарии:
Для раздела "Купить" и "Купить в кредит".
Невалидные данные номера карты:
1. - Оставляем пустое поле.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Неверный формат".
2. - Заполняем поле невалидным номером карты, например: 4422 8566 7890 1234.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат сообщение "Ошибка".
3. - Заполняем поле карты неполностью(менее 16 цифр).
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат сообщение "Неверный формат".
4. - Заполняем поле карты более 16 цифр.
- Остальные поля заполняем валидными данными.
- Ожидаемый результат: символы больше не вводятся в поле ввода.
5. - Заполняем поле карты буквами (рус\лат).
- Ожидаемый результат: буквы не вводятся.
6. - Заполняем поле карты спецсимволами.
- Ожидаемый результат: символы не вводятся.

Невалидные данные в поле месяц:
1. - Оставляем пустое поле.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Неверный формат".
2. - Заполняем поле цифрами до 10, не ставя впереди 0.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Неверный формат".
   
3. - Заполняем поле ввода более 2 символов.
- Ожидаемый результат: символы больше 2 символов не вводятся в поле ввода.
  
4. - Заполняем поле карты буквами и спецсимволами.
- Ожидаемый результат: буквы и символы не вводятся.
5. - Заполняем поле ввода цифрами 13 и более.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: "Неверно указан срок действия карты"

Невалидные данные в поле год:
1. - Оставляем пустое поле.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Неверный формат".
2. - Заполняем поле годом 22 и меньше.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Истёк срок действия карты".
  
3. - Заполняем поле ввода более 2 символов.
- Ожидаемый результат: символы больше 2 символов не вводятся в поле ввода.
4. - Заполняем поле карты буквами и спецсимволами.
- Ожидаемый результат: буквы и символы не вводятся.
5. - Заполняем поле годом, чтобы дата(месяц, год) превысила срок действия карты.
     
3. - Заполняем поле ввода более 2 символвов.
- Ожидаемый результат: символы больше не вводятся в поле ввода.
4. - Заполняем поле карты буквами и спецсимволами.
- Ожидаемый результат: буквы и символы не вводятся.
5. - Заполняем поле годом 29 и более.
 
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: "Неверно указан срок действия карты"

Невалидные данные в поле Владелец:
1. - Оставляем пустое поле.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Поле обязательно для заполнения".
2. - Заполняем поле именем Владельца на русском языке.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке.
3. - Заполняем поле одним словом.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке.
4. - Заполняем поле тремя и более словами.
- Ожидаемый результат: сообщение об ошибке
5. - Заполняем поле цифрами.
- Ожидаемый результат: цифры не вводятся.
6. - Заполняем поле спецсимволами.
- Ожидаемый результат: спецсимволы не вводятся

Невалидные данные в поле CVC/CVV:
1. - Оставляем пустое поле.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Поле обязательно для заполнения".
2. - Вводим значения менее трех цифр.
- Остальные поля заполняем валидными данными.
- Нажимаем кнопку "Продолжить".
- Ожидаемый результат: сообщение об ошибке "Неверный формат"
3. - Вводим значения более трех цифр.
     
- Ожидаемый результат: значения более 3х символов не вводятся
  
- Ожидаемый результат: символы не вводятся
 
4. - Вводим значения буквами.
- Ожидаемый результат: символы не вводятся
5. - Вводим значения спецсимволами.
- Ожидаемый результат: символы не вводятся.

## Перечень используемых инструментов:
 IDEA, Docker, chrome,java,Windows 10

## Перечень и описание возможных рисков при автоматизации:
- Риск появления проблем с настройкой приложения и необходимых БД.
- Риск появления проблем с правильной идентификацией полей ввода.
- Риск неработающего заявленного функционала приложения.

## Интервальная оценка с учётом рисков (в часах)
- Планирование, подготовка окружения, развертывание БД - 8 часов.
- Написание автотестов, тестирование и отладка автотестов - 48 часов.
- Формирование и анализ отчетов -8часов.

## План сдачи работ:
До 2 июня - планирование автоматизации тестирования, настройка окружения.
С 2 по 6 мая - написание и отладка автотестов, тестирование.
C 6 по 10 июня - подготовка отчетных документов.
